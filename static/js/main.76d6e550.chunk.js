(this.webpackJsonpmusic_videos=this.webpackJsonpmusic_videos||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(36),c=n.n(i),s=n(13),l=n(21),u=n(151),o=n(171),j=n(163),d=n(80),b=n(11),h=n(159),O=n(164),x=n(166),v=n(167),f=n(160),g=n(162),p=n(143),m=n(1);function y(e){var t=e.items,n=e.searchText;function r(e){return n?e.split(new RegExp(n,"ig")).join("<span>".concat(n,"</span>")):e}return(null===t||void 0===t?void 0:t.length)?Object(m.jsx)(h.a,{container:!0,spacing:2,p:2,children:null===t||void 0===t?void 0:t.map((function(e){var t=e.image_url,n=e.title,a=e.id,i=e.artist,c=e.genre,s=e.release_year;return Object(m.jsx)(h.a,{item:!0,xs:12,sm:4,md:3,children:Object(m.jsxs)(O.a,{children:[Object(m.jsx)(x.a,{component:"img",height:"140",width:"200",image:t,alt:n}),Object(m.jsxs)(v.a,{children:[Object(m.jsx)(j.a,{variant:"h6",dangerouslySetInnerHTML:{__html:r(n)},sx:{"& span":{background:"red"}}}),Object(m.jsx)(j.a,{variant:"subtitle1",dangerouslySetInnerHTML:{__html:r(i)},sx:{"& span":{background:"red"}}})]}),Object(m.jsxs)(g.a,{sx:{padding:"8px",display:"flex",gap:.5},children:[c&&Object(m.jsx)(f.a,{label:c}),Object(m.jsx)(f.a,{label:s})]})]})},a)}))}):Object(m.jsxs)(g.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(m.jsx)(p.a,{color:"warning",sx:{fontSize:"128px"}}),Object(m.jsx)(j.a,{children:"No results found!"}),Object(m.jsx)(j.a,{children:"Try changing the filters."})]})}y.propTyes={items:b.array.isRequired,searchText:b.string};var S=n(67),w=n.n(S),F=n(16),L=n(76);var _=n(79),T=Object(_.a)({palette:{mode:"dark"}}),k=n(156),C=n(157),I=n(152),M=n(154);function E(e){var t=e.setFilters,n=e.yearList,a=Object(r.useState)(),i=Object(s.a)(a,2),c=i[0],l=i[1];return Object(r.useEffect)((function(){c&&t((function(e){return Object(F.a)(Object(F.a)({},e),{},{year:c})}))}),[c,t]),Object(m.jsx)(h.a,{item:!0,xs:12,sm:6,children:Object(m.jsxs)(k.a,{fullWidth:!0,children:[Object(m.jsx)(C.a,{children:"Year"}),Object(m.jsx)(I.a,{label:"Year",value:c,defaultValue:"",onChange:function(e){var t;l(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},children:null===n||void 0===n?void 0:n.map((function(e){return Object(m.jsx)(M.a,{value:e,children:e},e)}))})]})})}var V=n(161);function A(e){var t=e.setFilters,n=e.genreList,a=Object(r.useState)([]),i=Object(s.a)(a,2),c=i[0],l=i[1];return Object(r.useEffect)((function(){(null===c||void 0===c?void 0:c.length)&&t((function(e){return Object(F.a)(Object(F.a)({},e),{},{genre:c})}))}),[c,t]),Object(m.jsx)(h.a,{item:!0,xs:12,sm:6,children:Object(m.jsxs)(k.a,{fullWidth:!0,children:[Object(m.jsx)(C.a,{id:"demo-multiple-chip-label",children:"Genre"}),Object(m.jsx)(I.a,{multiple:!0,value:c,defaultValue:"",onChange:function(e){var t;l(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},input:Object(m.jsx)(V.a,{label:"Chip"}),renderValue:function(e){return Object(m.jsx)(g.a,{sx:{display:"flex",gap:.5},children:e.map((function(e){var t;return Object(m.jsx)(f.a,{label:null===n||void 0===n||null===(t=n.find((function(t){return t.id===e})))||void 0===t?void 0:t.name},e)}))})},children:null===n||void 0===n?void 0:n.map((function(e){var t=e.name,n=e.id;return Object(m.jsx)(M.a,{value:n,children:t},n)}))})]})})}var z=n(158),D=n(170),P=n(150),R=n(78);function W(e){var t=e.setFilters,n=Object(r.useMemo)((function(){return Object(R.throttle)((function(e){t((function(t){var n;return Object(F.a)(Object(F.a)({},t),{},{search:null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value})}))}),500,{leading:!1,trailing:!0})}),[t]);return Object(m.jsx)(h.a,{item:!0,xs:12,children:Object(m.jsx)(z.a,{fullWidth:!0,label:"Search",onChange:n,InputProps:{endAdornment:Object(m.jsx)(D.a,{position:"end",children:Object(m.jsx)(P.a,{})})}})})}function B(e){var t=e.setFilters,n=e.yearList,r=e.genreList;return Object(m.jsxs)(h.a,{container:!0,spacing:2,p:2,children:[Object(m.jsx)(W,{setFilters:t}),Object(m.jsx)(E,{setFilters:t,yearList:n}),Object(m.jsx)(A,{setFilters:t,genreList:r})]})}var H={height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};function J(){var e=Object(r.useState)({search:"",year:null,genre:[]}),t=Object(s.a)(e,2),n=t[0],a=t[1],i=function(){var e=Object(r.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),c=Object(s.a)(i,2),l=c[0],u=c[1],o=Object(r.useState)(),j=Object(s.a)(o,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){function e(){return(e=Object(L.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,fetch("https://raw.githubusercontent.com/XiteTV/frontend-coding-exercise/main/data/dataset.json");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,a(Object(F.a)(Object(F.a)({},n),{},{videos:n.videos.map((function(e){var t;return Object(F.a)(Object(F.a)({},e),{},{genre:null===(t=n.genres.find((function(t){return t.id===e.genre_id})))||void 0===t?void 0:t.name})}))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),b(e.t0);case 14:u(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}u(!0),function(){e.apply(this,arguments)}()}),[]),{data:n,loading:l,error:d}}(),c=i.data,b=i.loading,h=i.error,O=Object(r.useRef)();Object(r.useEffect)((function(){c&&(O.current=new d.a(c.videos,{keys:["artist","title"],threshold:.1}))}),[c]);var x=Object(r.useMemo)((function(){if(c){var e=null===c||void 0===c?void 0:c.videos;return n.search&&O.current&&(e=O.current.search(n.search).map((function(e){return e.item}))),n.year&&(e=e.filter((function(e){var t=e.release_year;return n.year===t}))),n.genre.length&&(e=e.filter((function(e){var t=e.genre_id;return n.genre.includes(t)}))),e}}),[c,O,n]),v=Object(r.useMemo)((function(){var e,t=null===c||void 0===c||null===(e=c.videos)||void 0===e?void 0:e.map((function(e){return e.release_year})),n=new Set(t);return Array.from(n).sort((function(e,t){return t-e}))}),[c]);return b?Object(m.jsxs)(l.c,{theme:T,children:[Object(m.jsx)(u.a,{}),Object(m.jsx)(g.a,{sx:H,children:Object(m.jsx)(o.a,{size:100,disableShrink:!0})})]}):h?Object(m.jsxs)(l.c,{theme:T,children:[Object(m.jsx)(u.a,{}),Object(m.jsxs)(g.a,{sx:H,children:[Object(m.jsx)(p.a,{color:"error",sx:{fontSize:"128px"}}),Object(m.jsx)(j.a,{variant:"h1",textAlign:"center",children:"Oh, no!"}),Object(m.jsx)(j.a,{children:"Something went wrong!"})]})]}):Object(m.jsxs)(l.c,{theme:T,children:[Object(m.jsx)(u.a,{}),Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{variant:"h1",textAlign:"center",children:"Music Videos"}),Object(m.jsx)(B,{setFilters:a,yearList:v,genreList:null===c||void 0===c?void 0:c.genres}),Object(m.jsx)(y,{items:x,searchText:n.search})]})]})}var Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(J,{})}),document.getElementById("root")),Y(console.debug)}},[[108,1,2]]]);
//# sourceMappingURL=main.76d6e550.chunk.js.map